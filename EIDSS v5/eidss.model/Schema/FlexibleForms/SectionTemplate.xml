<?xml version="1.0" encoding="utf-8" ?>
<object name="SectionTemplate"
        connection="EidssConnectionString"
        generator="ObjectGenerator.xslt"
        xmlns="urn:schemas-bv:objectmodel">
    <storage>
        <get name="spFFGetSectionTemplate" type="simplelist" cache="true" />
    </storage>
    <tables>
        <table name="SectionTemplate">
          <keys>
                <key name="idfsSection"/>
                <key name="idfsFormTemplate"/>
                <key name="langid"/>
            </keys>
          <fields>
            <calculated name="IsFixedStubSection" type="bool" depends="idfsSection"
                            lambda='c => eidss.model.Model.FlexibleForms.Helpers.CriticalObjectsHelper.Sections.ContainsKey(c.idfsSection)' />
          </fields>
          <relations>
                <relation name="Section" table="Section" internal="false" type="sibling" source="idfsSection" target="idfsSection" paramsonly="true">
                    <params>
                        <param name="idfsFormType" type="Int64?" lambda="c => null" />
                        <param name="idfsSection" type="Int64?" lambda="c => c.idfsSection" />
                        <param name="idfsParentSection" type="Int64?" lambda="c => null" />
                    </params>
                </relation>
                <relation name="ParentSection" table="Section" internal="false" type="sibling" source="idfsParentSection" target="idfsSection" paramsonly="true">
                    <params>
                        <param name="idfsFormType" type="Int64?" lambda="c => null" />
                        <param name="idfsSection" type="Int64?" lambda="c => c.idfsParentSection" />
                        <param name="idfsParentSection" type="Int64?" lambda="c => null" />
                    </params>
                </relation>
                <relation name="FormType" table="FormType" internal="false" type="link" source="idfsFormType" target="idfsFormType" />
            </relations>

          <actions>
            <action name="SelectDetailList" type="Loadlist" />
          </actions>
        </table>
    </tables>
</object>
