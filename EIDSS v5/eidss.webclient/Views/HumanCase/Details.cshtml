@model eidss.model.Schema.HumanCase
@{
    ViewBag.Title = @Translator.GetMessageString("frmHumanCase");
    Layout = "~/Views/Shared/_DetailsLayout.cshtml";
    
}
@using bv.common.Configuration
@using eidss.webclient.Utils;
<script src='@Url.Content("~/Scripts/jquery.form.js")' type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/HumanCase/Script.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/Address/Lookups.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/Common/GridAreaHelpers.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/Address/CommonScript.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/GeoLocation/CommonScript.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/AntimicrobialTherapy/CommonScript.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/Sample/CommonScript.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/Patient/CommonScript.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/Organization/CommonScript.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/Employee/CommonScript.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/Common/AjaxFormSubmit.js")" type="text/javascript"></script>

<script type="text/javascript">
    $(window).load(function () {
        if ($("#IsReadOnlyForEdit").val().toString().toLowerCase() == 'true') {
            $("#btnSearchforDuplicates").attr('disabled', 'disabled');            
        }
        if ($("#ErrorMessage").val()) {
            $("#ShowENHumanCaseReportClick").val('');
            $("#ShowCIHumanCaseReportClick").val('');
        }
        if ($("#ShowENHumanCaseReportClick") && $("#ShowENHumanCaseReportClick").val() == '1') {
            var lang = GetSiteLanguage();
            var url = "/" + lang + "/HumanCase/EmergencyNotificationReport";
            ShowENHumanCaseReport(url);
        }
        else if ($("#ShowCIHumanCaseReportClick") && $("#ShowCIHumanCaseReportClick").val() == '1') {
            var lang = GetSiteLanguage();
            var url = "/" + lang + "/HumanCase/HumanInvestigationReport";
            ShowCIHumanCaseReport(url);
        }
    });


    $(document).ready(function () {
        $("#bMainPanel_Save").removeAttr("onclick");
        $("#bMainPanel_Ok").removeAttr("onclick");

        $("#bMainPanel_Save").unbind("click").click(onSaveClick);
        $("#bMainPanel_Ok").unbind("click").click(OKClick);
    });
         
</script>

<input type="hidden" id="grid_selecteditem" value="@Model.idfCase" /> 
<input type="hidden" id="IdfCurrentResidence" value="@Model.Patient.CurrentResidenceAddress.idfGeoLocation" /> 
<input type="hidden" id="IsNewCase" value="@ViewBag.IsNewCase" />
<input type="hidden" id="HasChangeDiagnosisReason" value="" />

<input type="hidden" id="EpiId" value="@ViewBag.IdfEpiObservation" />
<input type="hidden" id="CsId" value="@ViewBag.IdfCSObservation" />
<input type="hidden" id="DiagnosisId" value="@ViewBag.DiagnosisId" />

<input type="hidden" id="IsReadOnlyForEdit" value="@ViewBag.IsReadOnlyForEdit" />

@using (Html.BeginForm())
{   
    @Html.BvHidden(Model, "idfsDiagnosis")
    
    <input id='SaveAndExitClick' name='SaveAndExitClick' type='hidden' value='@ViewData["SaveAndExitClick"]' />   
    
    <input type="hidden" id="ShowENHumanCaseReportClick" name='ShowENHumanCaseReportClick' value="@ViewBag.ShowENHumanCaseReportClick" />
    <input type="hidden" id="ShowCIHumanCaseReportClick" name='ShowCIHumanCaseReportClick' value="@ViewBag.ShowCIHumanCaseReportClick" />    
        
    @Html.IdentificationAndHeartbeat("idfCase", Model.idfCase)   
      
    <div class="detailsWindow largeDetailsWindow">
        <div class="detailsTitle">
			<table class="detailsTitleContent">
				<tr>						
					<td class="titleImage">
                        <img src="../../Content/Images/NewHC.png" alt="" />
                    </td>
                    <td class="titleText">
                        @Translator.GetMessageString("frmHumanCase")
                    </td>
                    <td class="titleText titleFormCode">
                        H02
                    </td>
				</tr>
			</table>
		</div>        
		<table> 
            <tr>                                                               
                <td class="small">
                    @Html.LabelFor(m => m.strCaseID)
                </td>
                <td class="small">
                    @Html.BvEditbox(Model, "strCaseID")
                </td>
                <td>
                    @Html.LabelFor(m => m.idfsCaseProgressStatus)
                </td>
                <td>
                    @Html.BvCombobox(Model, "CaseProgressStatus")
                </td>
                <td>
                    @Html.LabelFor(m => m.datEnteredDate)
                </td>
                <td>
                    @Html.BvEditbox(Model, "strReadOnlyEnteredDate")
                </td>
                <td>
                    @Html.LabelFor(m => m.datModificationDate)
                </td>
                <td>
                    @Html.BvEditbox(Model, "strReadOnlyModificationDate")
                </td>
            </tr>                           
        </table>
        <table> 
            <tr> 
                <td class="small">   
                    @Translator.GetString("strPatient")                                                        
                </td>
                <td>
                    @Html.BvEditbox(Model.Patient, "strName")                                        
                </td>
                <td class="small">
                    @Html.LabelFor(m => m.strDiagnosis)
                </td>
                <td>
                    @Html.BvEditbox(Model, "strDiagnosis")
                </td>
                <td class="small">        
                    @Html.LabelFor(m => m.strCaseClassification)                                  
                </td>
                <td class="medium">
                    @Html.BvEditbox(Model, "strCaseClassification")
                </td>
                <td></td>
            </tr>                           
        </table>                 
	    @(Html.Telerik().TabStrip()
            .Name("TabStrip")
            .ClientEvents(events => events.OnSelect("function(e){ onHumanCaseTabSelect(e, '" + Model.idfCase + "', 'TabStrip'); }"))
            .Items(items =>
            {
                items.Add()
                    .Text(Translator.GetMessageString("tabTitleNotification"))
                    .HtmlAttributes(Config.GetBoolSetting("AutoTestingVersion") ? (object)new { bvid = "tabTitleNotification" } : new { })
                    .Content(Html.Partial(@"../HumanCase/Notification", Model).ToHtmlString());
                items.Add()
                    .Text(Translator.GetMessageString("tabTitleCaseInvestigation"))
                    .HtmlAttributes(Config.GetBoolSetting("AutoTestingVersion") ? (object)new { bvid = "tabTitleCaseInvestigation" } : new { })
                    .Content(Html.Partial(@"../HumanCase/Investigation", Model).ToHtmlString());
                items.Add()
                    .Text(Translator.GetMessageString("tabTitleTests"))
                    .HtmlAttributes(Config.GetBoolSetting("AutoTestingVersion") ? (object)new { bvid = "tabTitleTests" } : new { })
                    .Content(Html.Partial(@"../HumanCase/Tests", Model).ToHtmlString());
            }).SelectedIndex(0)
            )		
    </div>    
}
